<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <title> - solve et coagula</title><meta name="Description" content="Welcome to my little corner on the web"><meta property="og:title" content="" />
<meta property="og:description" content="Protohackers In today&rsquo;s interconnected world, communication between devices and systems is essential. One of the fundamental protocols for communication over the internet is the Transmission Control Protocol (TCP), which allows for reliable, ordered, and error-checked delivery of data. In this blog post, we&rsquo;ll explore how to create a TCP Echo Service in Python, which is a simple server that echoes any data it receives back to the client. This is a useful exercise for understanding the basics of TCP communication and Python&rsquo;s socket programming." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://thesimplezero.github.io/1/01/00-smoketest/" /><meta property="og:image" content="https://thesimplezero.github.io/logo.png"/><meta property="article:section" content="posts" />

<meta property="og:site_name" content="solve et coagula" />
<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://thesimplezero.github.io/logo.png"/>

<meta name="twitter:title" content=""/>
<meta name="twitter:description" content="Protohackers In today&rsquo;s interconnected world, communication between devices and systems is essential. One of the fundamental protocols for communication over the internet is the Transmission Control Protocol (TCP), which allows for reliable, ordered, and error-checked delivery of data. In this blog post, we&rsquo;ll explore how to create a TCP Echo Service in Python, which is a simple server that echoes any data it receives back to the client. This is a useful exercise for understanding the basics of TCP communication and Python&rsquo;s socket programming."/>
<meta name="application-name" content="solve et coagula">
<meta name="apple-mobile-web-app-title" content="solve et coagula"><meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="https://thesimplezero.github.io/1/01/00-smoketest/" /><link rel="stylesheet" href="/css/style.min.css"><link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css"></noscript><link rel="preload" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css"></noscript><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "",
        "inLanguage": "en",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/thesimplezero.github.io\/1\/01\/00-smoketest\/"
        },"genre": "posts","wordcount":  515 ,
        "url": "https:\/\/thesimplezero.github.io\/1\/01\/00-smoketest\/","publisher": {
            "@type": "Organization",
            "name": ""},"author": {
                "@type": "Person",
                "name": "thesimplezero"
            },"description": ""
    }
    </script></head>
    <body data-header-desktop="fixed" data-header-mobile="auto"><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('dark' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'dark' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="solve et coagula"><span class="header-title-pre"><i class='fa-solid fa-terminal' aria-hidden='true'></i></span><span id="id-1" class="typeit"></span></a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/posts/" title="Blog"><i class="fa-solid fa-square-pen"></i>  </a><a class="menu-item" href="/tags/" title="Tags"><i class="fa-solid fa-tag"></i>  </a><a class="menu-item" href="/categories/" title="Categories"><i class="fa-solid fa-folder"></i>  </a><a class="menu-item" href="https://discord.gg/" title="Discord Server" rel="noopener noreffer" target="_blank"><i class="fa-brands fa-discord"></i>  <i class="fa-solid fa-server"></i></a><span class="menu-item delimiter"></span><span class="menu-item search" id="search-desktop">
                        <input type="text" placeholder="Search titles or contents..." id="search-input-desktop">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-desktop" title="Search">
                            <i class="fas fa-search fa-fw" aria-hidden="true"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-desktop" title="Clear">
                            <i class="fas fa-times-circle fa-fw" aria-hidden="true"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-desktop">
                            <i class="fas fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
                        </span>
                    </span><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                    <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
                </a></div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="solve et coagula"><span class="header-title-pre"><i class='fa-solid fa-terminal' aria-hidden='true'></i></span><span id="id-2" class="typeit"></span></a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><div class="search-wrapper">
                    <div class="search mobile" id="search-mobile">
                        <input type="text" placeholder="Search titles or contents..." id="search-input-mobile">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-mobile" title="Search">
                            <i class="fas fa-search fa-fw" aria-hidden="true"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-mobile" title="Clear">
                            <i class="fas fa-times-circle fa-fw" aria-hidden="true"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-mobile">
                            <i class="fas fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
                        </span>
                    </div>
                    <a href="javascript:void(0);" class="search-cancel" id="search-cancel-mobile">
                        Cancel
                    </a>
                </div><a class="menu-item" href="/posts/" title="Blog"><i class="fa-solid fa-square-pen"></i></a><a class="menu-item" href="/tags/" title="Tags"><i class="fa-solid fa-tag"></i></a><a class="menu-item" href="/categories/" title="Categories"><i class="fa-solid fa-folder"></i></a><a class="menu-item" href="https://discord.gg/" title="Discord Server" rel="noopener noreffer" target="_blank"><i class="fa-brands fa-discord"></i><i class="fa-solid fa-server"></i></a><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
            </a></div>
    </div>
</header><div class="search-dropdown desktop">
        <div id="search-dropdown-desktop"></div>
    </div>
    <div class="search-dropdown mobile">
        <div id="search-dropdown-mobile"></div>
    </div><main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">Contents</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animate__animated animate__flipInX"></h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="https://thesimplezero.github.io" title="Author" target="_blank" rel="noopener noreffer author" class="author"><i class="fas fa-user-circle fa-fw" aria-hidden="true"></i>thesimplezero</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw" aria-hidden="true"></i>&nbsp;<time datetime="0001-01-01">0001-01-01</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden="true"></i>&nbsp;515 words&nbsp;
                <i class="far fa-clock fa-fw" aria-hidden="true"></i>&nbsp;3 minutes&nbsp;</div>
        </div><div class="details toc" id="toc-static"  data-kept="">
                <div class="details-summary toc-title">
                    <span>Contents</span>
                    <span><i class="details-icon fas fa-angle-right" aria-hidden="true"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#tcp-communication">TCP Communication</a></li>
    <li><a href="#pythons-socket-library">Python&rsquo;s Socket Library</a></li>
    <li><a href="#threading-in-python">Threading in Python</a></li>
    <li><a href="#logging-in-python">Logging in Python</a></li>
    <li><a href="#firewall-configuration">Firewall Configuration</a></li>
    <li><a href="#exposing-a-local-server-to-the-internet-using-ngrok">Exposing a Local Server to the Internet using ngrok</a></li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><h1 id="protohackers">Protohackers</h1>
<p>In today&rsquo;s interconnected world, communication between devices and systems is essential. One of the fundamental protocols for communication over the internet is the Transmission Control Protocol (TCP), which allows for reliable, ordered, and error-checked delivery of data. In this blog post, we&rsquo;ll explore how to create a TCP Echo Service in Python, which is a simple server that echoes any data it receives back to the client. This is a useful exercise for understanding the basics of TCP communication and Python&rsquo;s socket programming.</p>
<p>Concepts Covered:</p>
<ol>
<li>TCP Communication</li>
<li>Python&rsquo;s socket library</li>
<li>Threading in Python</li>
<li>Logging in Python</li>
<li>Exposing a local server to the internet using ngrok</li>
</ol>
<h2 id="tcp-communication">TCP Communication</h2>
<p>TCP is a connection-oriented protocol, meaning it establishes a connection between two devices before exchanging data. The protocol ensures that the data is delivered reliably and in order, making it a popular choice for many applications, such as file transfers and email.</p>
<p>A TCP Echo Service is a server that listens for incoming TCP connections and echoes any received data back to the client unmodified. This service can be used to test network connectivity, debug applications, or as a building block for more complex systems.</p>
<h2 id="pythons-socket-library">Python&rsquo;s Socket Library</h2>
<p>Python&rsquo;s socket library provides a simple and efficient way to create TCP servers and clients. The library offers functions for creating, binding, listening, and accepting connections, as well as sending and receiving data over a socket.</p>
<p>To create a TCP server, you can follow these steps:</p>
<ol>
<li>Create a socket using <code>socket.socket(socket.AF_INET, socket.SOCK_STREAM)</code>.</li>
<li>Bind the socket to a specific IP address and port using <code>bind((host, port))</code>.</li>
<li>Start listening for incoming connections using listen <code>(max_connections)</code>.</li>
<li>Accept new connections and handle them using <code>accept()</code>.</li>
</ol>
<h2 id="threading-in-python">Threading in Python</h2>
<p>To handle multiple simultaneous clients, we can use Python&rsquo;s <code>threading</code> module. By spawning a new thread for each client connection, we can ensure that the server can efficiently process multiple connections concurrently.</p>
<p>To create a new thread for each connection, you can use <code>threading.Thread</code> class and pass in a function (in our case, the <code>handle_client</code> function) to be executed within the thread.</p>
<h2 id="logging-in-python">Logging in Python</h2>
<p>Logging is a crucial aspect of any application, as it helps you monitor and troubleshoot issues. Python&rsquo;s built-in <code>logging</code> module allows you to easily log messages at different severity levels, such as DEBUG, INFO, WARNING, ERROR, and CRITICAL. By configuring the logging module, you can store logs in a file, display them on the console, or even send them to a remote server for further analysis.</p>
<h2 id="firewall-configuration">Firewall Configuration</h2>
<p>When exposing your server to the internet, it&rsquo;s important to configure a firewall to protect your system. We will configure the UFW firewall to allow incoming connections on port 7 (TCP) and deny all other incoming connections while allowing all outgoing connections.</p>
<p><code>sudo ufw allow 7/tcp &amp;&amp; sudo ufw enable</code></p>
<h2 id="exposing-a-local-server-to-the-internet-using-ngrok">Exposing a Local Server to the Internet using ngrok</h2>
<p>After configuring our firewall, we will expose our local server to the internet and for this task, will use ngrok. ngrok creates a secure public URL for your local server, which can be shared with clients to access your server from the internet.</p>
</div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>Updated on 0001-01-01</span>
            </div></div>
        <div class="post-info-line">
            <div class="post-info-md"></div>
            <div class="post-info-share">
                <span><a href="javascript:void(0);" title="Share on Twitter" data-sharer="twitter" data-url="https://thesimplezero.github.io/1/01/00-smoketest/" data-title="" data-via="thesimplezero"><i class="fab fa-twitter fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Facebook" data-sharer="facebook" data-url="https://thesimplezero.github.io/1/01/00-smoketest/"><i class="fab fa-facebook-square fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Linkedin" data-sharer="linkedin" data-url="https://thesimplezero.github.io/1/01/00-smoketest/"><i class="fab fa-linkedin fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Hacker News" data-sharer="hackernews" data-url="https://thesimplezero.github.io/1/01/00-smoketest/" data-title=""><i class="fab fa-hacker-news fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Reddit" data-sharer="reddit" data-url="https://thesimplezero.github.io/1/01/00-smoketest/"><i class="fab fa-reddit fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Line" data-sharer="line" data-url="https://thesimplezero.github.io/1/01/00-smoketest/" data-title=""><i data-svg-src="https://cdn.jsdelivr.net/npm/simple-icons@7.3.0/icons/line.svg" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on 微博" data-sharer="weibo" data-url="https://thesimplezero.github.io/1/01/00-smoketest/" data-title=""><i class="fab fa-weibo fa-fw" aria-hidden="true"></i></a></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">Back</a></span>&nbsp;|&nbsp;<span><a href="/">Home</a></span>
        </section>
    </div>

    <div class="post-nav"></div>
</div>
</article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line" itemscope itemtype="http://schema.org/CreativeWork"><i class="far fa-copyright fa-fw" aria-hidden="true"></i><span itemprop="copyrightYear">2023</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="https://thesimplezero.github.io" target="_blank">thesimplezero</a></span>&nbsp;|&nbsp;<span class="license"><a rel="This is free and unencumbered software released into the public domain." href="https://unlicense.org" target="_blank">The Unlicense</a></span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="Back to Top">
                <i class="fas fa-arrow-up fa-fw" aria-hidden="true"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="View Comments">
                <i class="fas fa-comment fa-fw" aria-hidden="true"></i>
            </a>
        </div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/css/lightgallery-bundle.min.css"><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/autocomplete.js@0.38.1/dist/autocomplete.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/algoliasearch@4.13.1/dist/algoliasearch-lite.umd.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/twemoji@14.0.2/dist/twemoji.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/lightgallery.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/plugins/thumbnail/lg-thumbnail.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/plugins/zoom/lg-zoom.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/sharer.js@0.5.1/sharer.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/typeit@8.6.0/dist/index.umd.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"Copy to clipboard","maxShownLines":50},"comment":{},"data":{"id-1":"solve et coagula","id-2":"solve et coagula"},"lightgallery":true,"search":{"algoliaAppID":"","algoliaIndex":"","algoliaSearchKey":"","highlightTag":"em","maxResultLength":10,"noResultsFound":"No results found","snippetLength":30,"type":"algolia"},"twemoji":true,"typeit":{"cursorChar":"|","cursorSpeed":1000,"data":{"id-1":["id-1"],"id-2":["id-2"]},"duration":-1,"speed":100}};</script><script type="text/javascript" src="/js/theme.min.js"></script></body>
</html>
